<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Browse Events | EventHub</title>
  <meta charset="UTF-8">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    html, body {
      height: 100%;
      margin: 0;
      display: flex;
      flex-direction: column;
    }
    main {
      flex: 1;
    }
    footer {
      background-color: #212529;
      color: white;
    }
  </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container">
    <a class="navbar-brand" href="#">EventHub</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link active" th:href="@{/user/events}">Home</a></li>
        <li class="nav-item"><a class="nav-link" th:href="@{/user/my-registrations}">My Registrations</a></li>
        <li class="nav-item"><a class="nav-link" th:href="@{/user/profile}">Profile</a></li>
        <li class="nav-item"><a class="nav-link" th:href="@{/logout}">Logout</a></li>
      </ul>
    </div>
  </div>
</nav>

<main>
  <div class="container mt-4">
    <h2 class="mb-4">Browse Events</h2>

    <!-- If events exist -->
    <div th:if="${events != null and !events.isEmpty()}">

      <!-- Search Form -->
      <form method="get" class="row g-3 mb-4">
        <div class="col-md-3">
          <input type="text" class="form-control" name="location" th:value="${location}" placeholder="Location">
        </div>
        <div class="col-md-3">
          <select class="form-select" name="category">
            <option value="">All Categories</option>
            <option th:each="cat : ${categories}" th:value="${cat}" th:text="${cat}" th:selected="${cat == category}"></option>
          </select>
        </div>
        <div class="col-md-3">
          <input type="date" class="form-control" name="date" th:value="${date}">
        </div>
        <div class="col-md-3">
          <button type="submit" class="btn btn-primary w-100">Search</button>
        </div>
      </form>

      <!-- Event Cards -->
      <div class="row">
        <div th:each="event : ${events}" class="col-md-4 mb-4">
          <div class="card h-100 shadow-sm border-0 rounded-3">
            <img th:if="${event.image != null}" th:src="@{/image/{id}(id=${event.id})}" class="card-img-top" style="height: 200px; object-fit: cover;">
            <div class="card-body">
              <h5 class="card-title fw-bold" th:text="${event.title}">Event Title</h5>
              <p class="card-text text-muted" th:text="${event.description}">Description</p>
              <a th:href="@{/user/event/{id}(id=${event.id})}" class="btn btn-outline-primary w-100">View Details</a>
            </div>
          </div>
        </div>
      </div>

    </div>

    <!-- If no events -->
    <div th:if="${events == null or events.isEmpty()}" class="d-flex justify-content-center align-items-center my-5">
      <div class="card shadow-lg border-0 text-center p-4" style="max-width: 500px;">
        <div class="mb-3">
          <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" fill="#6c757d" class="bi bi-calendar-x" viewBox="0 0 16 16">
            <path d="M3.5 0a.5.5 0 0 0-.5.5V1H2a2 2 0 0 0-2 2v1h16V3a2 2 0 0 0-2-2h-1V.5a.5.5 0 0 0-1 0V1H4V.5a.5.5 0 0 0-.5-.5zM16 14V5H0v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2zM5.354 8.354a.5.5 0 1 1-.708-.708L7.293 5 5.646 3.354a.5.5 0 1 1 .708-.708L8 4.293l1.646-1.647a.5.5 0 0 1 .708.708L8.707 5l1.647 1.646a.5.5 0 0 1-.708.708L8 5.707 6.354 7.354a.5.5 0 0 1-.708 0z"/>
          </svg>
        </div>
        <h4 class="fw-bold text-dark">No Events Available</h4>
        <p class="text-muted mb-3">It looks like there are currently no events to show. Please check back later!</p>
      </div>
    </div>
  </div>
</main>

<!-- Footer -->
<footer class="text-center py-3 mt-auto">
  <div class="container">
    <p class="mb-0">Â© 2025 EventHub. All Rights Reserved.</p>
  </div>
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
